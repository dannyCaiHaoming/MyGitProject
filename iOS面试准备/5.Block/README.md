## 5 Block


### 5.1 Block介绍

Block是将`函数`及其`执行上下文`封装起来的`对象`

#### 5.1.1 Block描述结构体`__block_impl`

	__block_impl结构
	{
		void *isa;block是对象的标志
		int Flags;
		int Reserved;
		void *FuncPtr;函数指针
	}

#### 5.1.2 什么是Block的调用

即是`函数`的调用

### 5.2 截获变量

#### 5.2.1 变量类型

- 局部变量
 - 基本数据类型
 - 对象类型
- 静态局部变量
- 全局变量
- 静态全局变量

#### 5.2.2

- 对于`基本类型的局部变量`，截获其`值`
- 对于`对象类型的局部变量`，连同所有权`修饰符`一起截获
- 以指针形式截获`局部静态变量`
- 不截获全局变量，静态全局静态变量


### 5.3 __block修饰符

- 一般情况下，对被截获变量进行==赋值==操作则需要添加`__block`修饰符

#### 5.3.1 __block修饰符使用时机

- 局部变量进行修改，==需要==使用`__block`
	- 基本数据类型
	- 对象类型

- ==不需要==使用`__block`
	- 静态局部变量
	- 全局变量
	- 静态全局变量

	
#### 5.3.2 __block修饰的变量变成了`对象`

![block变量变成对象的结构图](https://github.com/dannyCaiHaoming/MyGitProfject/blob/master/iOS%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/images/5/block%E5%8F%98%E9%87%8F%E5%8F%98%E6%88%90%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%BB%93%E6%9E%84.png)



### 5.4 Block的内存管理


### 5.5 Block的循环引用