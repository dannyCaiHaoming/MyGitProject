## 7 RunLoop


### 7.1 概念

#### 7.1.1 什么是RunLoop？

`RunLoop`是通过内部维护的**事件循环**来对**事件/消息进行管理**的一个对象.

#### 7.1.2 Event Loop

- 没有消息需要处理时，休眠以避免资源占用
	- 用户态 -> 内核态
- 有消息需要处理时，立刻被唤醒
	- 用户态 <- 内核态


面试题：main函数为什么能保持不退出？

main函数中调用`UIAplicationMain`函数中，会启动主线程中使用RunLoop，RunLoop是一种对事件循环的维护机制，在有事做的时候去做事，没有事的时候，可以对用户态到内核态进行切换，从而避免资源占用，使得线程休眠。

### 7.2 应用场景

#### 7.2.1 常驻线程


#### 7.2.2 

### 7.2 数据结构

`NSRunLoop`是`CFRunLoop`的封装，提供了面向对象的API。


#### 7.2.1 `CFRunLoop`

#### 7.2.2 `CFRunLoopMode`

#### 7.2.3 `Source/Timer/Observer`


### 7.3 事件循环机制


### 7.4 RunLoop与NSTimer


### 7.5 RunLoop与多线程

 


-----
-----
-----
-----
-----
-----
-----
-----
-----