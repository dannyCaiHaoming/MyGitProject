### 12. 暴力破解测试

暴力破解也叫枚举测试、穷举法测试，是一种针对密码破译的方法。

#### 1. C/S架构破解

##### 1. SQL Server

Hydra工具，支持的服务有FTP、Mysql，Mssql、Pop3、SSH等。

##### 2. MySQL

Medusa工具，



#### 2.  B/S架构破解

攻击一些PHP开源项目框架，如WordPress。



#### 3. 暴力破解

##### 1. 攻击OA系统

使用一些默认的账户名，ROOT、SA、Administrator、admin等。

##### 2. 破解验证码



#### 4. 防止暴力破解

##### 1. 密码复杂性

- 至少一个小写
- 至少一个大写
- 至少一个数字
- 至少一个特殊字符

##### 2. 验证码措施

CAPTCHA（验证码），"Completely Automated Public Turing test to tell Computers and Humans Apart"。

##### 3. 登录日志（限制登录次数）

用户登录时，现在登录日志中查找用户登录错误的次数、时间等信息，如果连续错误、失败，那么将采取某种措施。





### 13. 旁注攻击

旁注攻击：攻击者在攻击目标时，对目标网站无从下手，找不到漏洞，攻击者可能会通过具有同一服务器的网站渗透到目标网站，从而获取目标网站的权限。

多个服务可能部署在同一台服务器，如果目标服务找不到漏洞，可以查看服务器上其它服务是否存在漏洞，从而获取这台机器的控制权。

#### 1. 服务器端Web架构

可以通过不同服务使用同一个数据库进行数据提取，获取其它服务的数据

通过数据库提权方式获取服务器管理员权限？

#### 2. IP逆向查询

可以通过网址查找到IP地址，不少网站提供IP到网站的逆向查询功能。

- tool.chinaz.com/Same/
- dns.aizhan.com
- www.114est.com/ip/

#### 3. SQL跨站查询

SQL旁注即跨库查询攻击，是管理员没有分配好数据库用户权限所导致的问题。

#### 4. 目录越权

#### 5. 构造注入点

通过数据库来跨目录读写文件。

#### 6.CDN

CDN：Content Delivery Network，即内容分发网络。尽可能避开互联网上有可能影响数据传输速度和稳定性的瓶颈、环节，使内容的传输啊速度更快 更稳定。

CDN将原服务器上可以缓存的文件（静态文件、图片、js、css等）下载到缓存服务器，当用户访问你的域名的时候，将访问缓存服务器，而不是直接去访问源服务器。

CDN能防范大部分Web攻击，但是攻击者能直接攻击CDN节点造成网络无法访问，另外也能通过以下方法搜集真实IP。

- phpinfo（）
- 子域名
- 观察ip变化



### 14. 提权

提权是将服务器的普通用户提升为管理员用户的一种操作，提权常用于辅助旁站攻击

提权一般分为：溢出提权，第三方组件提权

#### 1. 溢出提权

利用系统本身或系统中软件的漏洞来获取root权限。

- 远程溢出，针对操作系统
- 本地溢出，针对操作系统上的软件

###### 1. LInux 提权

使用NC反弹。

###### 2. Windows提权

依赖服务器所支持的脚本语言是否存在执行命令权限。ASP，PHP，JSP等。

#### 2. 第三方组件提权

###### 1. 信息搜集

###### 2. 数据库提权

###### 3. FTP提权

###### 4. PcAnywhere提权



#### 3. 虚拟主机提权



#### 4. 提权辅助

###### 1. 3389端口

微软提供远程桌面服务默认的端口。远程桌面协议（Remote Desktop Protocol），简称RDP。

###### 2. 端口转发

###### 3. 启动项提权

###### 4. DLL劫持

###### 5. 添加后门



#### 5. 服务器防提权措施

- 服务器打补丁，及时更新
- 关闭危险端口
- 删除System32目录下的敏感exe文件
- 删除不安全的组件
- 安装服务器安全配置软件，安全狗、云锁、D盾



### 15. ARP欺骗攻击

#### 1. ARP协议简介

ARP是Address Resolution Protocol（地址解析协议）缩写。在主机发送数据之前，将目标IP转换为MAC地址，完成网络地址到物理地址的映射。

##### 1. ARP缓存表

保存这个局域网网络中，各主机ip对应的mac地址

##### 2. 局域网主机通信

假设A与B通信

1. 通过B的IP地址，用子关掩码判断是否在同一个局域网内
2. 同局域网内，根据ARP缓存表中B的MAC地址进行发送。
3. 如果不存在，则使用广播方式，查找B主机的MAC地址，B接收到广播会把自己的MAC地址发送给A
4. 如果B不在同一个局域网内，就会发送到网关，网关查找方式，也是通过广播方式
5. 网关1向B所在的网关2进行消息发送
6. 网关2像B地址发送消息，也是查找ARP缓存表，没有则广播，然后再发送

##### 3. ARP欺骗原理

- 主机不知道对方MAC地址，在收到广播请求的时候，可以伪装
- ARP协议是无状态，主机可以自由发送ARP应答包 
- 一台主机的IP地址被缓存下来，就会被当做可信任的主机



#### 2. ARP攻击

C段ARP嗅探攻击。

C段攻击，指同一个网关下的主机ARP嗅探，在嗅探出敏感数据后，继续实施对目标网站的渗透。

###### 1. Cain

###### 2. Ettercap

###### 3. NetFuke



#### 3. 防御ARP攻击

- 静态绑定
- ARP防火墙



### 16. 社会工程学



#### 1. 信息收集



#### 2. 沟通



#### 3. 伪造