#### 数据收集

###### 1. [ACTF2020 新生赛]BackupFile

打开网页，查看f12，啥东西都没有，跑端口，也查不到内容，只有一个index.php。
那就只能上`dirsearch`。
跑完找到`index.php.bak`。

#### SQL注入

###### 1. [强网杯 2019]随便注 1

难点：遇到`select|update|delete|drop|insert|where`关键字的筛选。
尝试使用了对`select`中间插入各种字符，注释，无果。

使用`show`，能跟`select`类似，但是到最后列字段没办法搞出来。

解决方案：
1. 在用show查看库，表，列，能观察到，页面打印的内容是words表，因此可以将flag的表改名该字段。先将原来`words`表改成其他名字，然后将flag表改成`words`。然后增加`id`列名，将`flag`列名改成data。然后重新访问即可。
```
    rename table words to word1;
    rename table `1919810931114514` to words;
    alter table words add id int unsigned not Null auto increment primary key;
    alter table words change flag data varchar(100);
```
2. 使用预处理命令。先用`set`命令，将查询语句写到一个命令里面，但是这里的查询语句要进行转码。
```
    ';Set @a=0x73656c656374202a2066726f6d20603139313938313039333131313435313460;Prepare execsql from @a;execute execsql;#
```
3. 使用handler语句，根据show，查询到的表名，查询
```
'; handler  `1919810931114514`open as `a`; handler `a` read next;#
```


##### 2. [SUCTF 2019]EasySQL 1
**需要着重思考，怎么猜出sql语句中存在||**
难点，能猜到对一些关键字进行了筛选。
但是能使用堆叠查询查询到当前的表在cfg,但是用一般的查询语句，无法成功执行，用户名、库名、表名都知道，就是查不了列名，难受。

解决：
1. 在尝试输入1,2；1,2，3等输入的时候，其实就能发现前面两项都会正常的输出，然后最后一项都是1，这个时候可以记住，有可能存在`||`的条件，因此有个很骚的解法
```
# 内置的sql语句为
sql="select".sql="select".post[‘query’]."||flag from Flag";
# 输入 *,1
select *,1||flag from Flag，也就是select *,1 from Flag
```

2. 使用sql_mode,但是其实也是得先猜到源码中存在`||`，然后使用`PIPES_AS_CONCAT`对`||`进行修改成拼接字符串的含义。


##### 3. [极客大挑战 2019]LoveSQL 1

一顿操作登录后猛逼，没看见有啥注释网页代码。oh~对了，内容在数据库，艹，都sql注入获取到登录了，那就再sql爆破信息。

这里有点生疏sql爆破语句。

```
(select group_concat(table_name) from information_schema.tables where table_schema=database())
(select group_concat(column_name) from information_schema.columns where table_name='geekuser')
# 最终爆破l0ve1ysq1表的密码中发现flag
```


##### 4. [极客大挑战 2019]BabySQL 1

和上面一样，能简单从账号密码中发现注入漏洞。

但是区别在于这道题，会对`union`,`select`,`or`,`from`,`where`关键字有筛选。

认真观察错误返回，就能看见某些关键字被筛选掉。

```
# 其实如果发现注入并且能看见输出，那样子的话可以构造以下语句，查看哪些语句被筛选
union select 'union','select','or' #
```


#### 文件上传

##### 1. [极客大挑战 2019]Upload 1

不知道为何想尝试上传一张正常的图片也不行。。
简单能判断，逻辑是在后端判断。

修改绕过流程就是：
- 修改`Content-Type`
- 修改文件名绕过。`php5`,`php3`，`phtml`,基本的后缀名黑名单
- 对内容读取判断绕过`GIF89a`

剩下就是蚁剑。

##### 2. [ACTF2020 新生赛]Upload 1

同上

#### 文件包含

##### LFI

###### 1. [ACTF2020 新生赛]Include 1

要点：
1. 能访问到flag.php，但是没有看见flag，那么flag可能在源码中，因此考虑如何访问php文件的源码
2. ctf中一般使用到`input`,`filter`，但是尝试使用`input`的时候返回错误，因此尝试使用`php://filter/read=convert.base64-encode/resource=flag.php`，然后将得到的字符串base64decode。


##### 2. [极客大挑战 2019]Secret File 1

要点：
1. 要用Burp Suite，逐个页面查看返回的页面，存在重定向。
2. 找到`secr3t.php`，看到源码，可以使用`file`文件包含，并且看到目标在`flag.php`文件，但是访问是没法拿到flag
3. 剩下就是使用php伪协议查看`flag.php`的源码,



#### 命令注入


###### 1. [ACTF2020 新生赛]Exec 1

要点：
1. 思考到ping，是执行了shell脚本，那么怎么拼接达到执行自己想要的命令。ping xxx ; ls ;


###### 2. [GXYCTF2019]Ping Ping Ping 1

难。
就是要构造绕过检测的语句，**补充：命令执行绕过**


#### 代码审计


##### php

###### 1. [HCTF 2018]WarmUp 1

- mb_substr(str,startIdx,endIdx) 截取子串
- mb_strpos(str,findStr) 找出第一个目的str的位置

要点：
1. 题目注释能找出源码，查看源码能看出需要构造一个寻找下标0到`？`所在的字符串，如果没有构造字符串，则在末尾补上，去和白名单对比
2. 但是问号提取的时候会被urldecode，因此需要对问号进行urlencode，这时候看代码，还有个条件就是后文对输入还进行了一次urldecode，所以说条件都是有用的。
3. 匹配上之后，?flag是无法直接被include的，因此，尝试用了相对目录的方式。



###### 2. [ACTF2020 新生赛]BackupFile

打开网页，查看f12，啥东西都没有，跑端口，也查不到内容，只有一个index.php。
那就只能上`dirsearch`。
跑完找到`index.php.bak`。
审计代码发现需要传一个数字类型的`key`，然后和`str`字符串进行对比。

- php弱类型，使用一个`int`和`string`做`==`判等于，会把`string`转成`int`，
这里的“123ffwsfwefwf24r2f32ir23jrw923rskfjwtsw54w3”转成`int`之后成了`123`


###### 3. [极客大挑战 2019]PHP 1

同上，数据收集，使用`dirSearch`一波，找到`www.zip`文件，阅读代码。知道是需要使用`反序列化漏洞`，又是不熟悉。



#### 中间件漏洞

###### 1. [极客大挑战 2019]Http 1

打开网页，代码也啥都没注释，上下左右看了很久都没有东西，还试了跑路径，但是有些时候会卡主，不知道什么回事。但是不知道为什么看见他页面有个特殊的端口号，忽然想到试试80端口访问，出现一个说不维护的页面提示。那可以尝试使用80端口配合中间件看看有啥漏洞。
